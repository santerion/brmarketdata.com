(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{47527:(e,t,a)=>{Promise.resolve().then(a.bind(a,76093))},76093:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var r=a(95155),l=a(12115),n=a(41287),o=a(94754),s=a(96025),i=a(16238),d=a(62341),c=a(81499),u=a(66372),m=a(59434);function h(e){let{...t}=e;return(0,r.jsx)(u.bL,{"data-slot":"popover",...t})}function p(e){let{...t}=e;return(0,r.jsx)(u.l9,{"data-slot":"popover-trigger",...t})}function f(e){let{className:t,align:a="center",sideOffset:l=4,...n}=e;return(0,r.jsx)(u.ZL,{children:(0,r.jsx)(u.UC,{"data-slot":"popover-content",align:a,sideOffset:l,className:(0,m.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var v=a(68072),x=a(47924);function g(e){let{className:t,...a}=e;return(0,r.jsx)(v.uB,{"data-slot":"command",className:(0,m.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...a})}function b(e){let{className:t,...a}=e;return(0,r.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,r.jsx)(x.A,{className:"size-4 shrink-0 opacity-50"}),(0,r.jsx)(v.uB.Input,{"data-slot":"command-input",className:(0,m.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...a})]})}function j(e){let{className:t,...a}=e;return(0,r.jsx)(v.uB.List,{"data-slot":"command-list",className:(0,m.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...a})}function y(e){let{...t}=e;return(0,r.jsx)(v.uB.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function w(e){let{className:t,...a}=e;return(0,r.jsx)(v.uB.Group,{"data-slot":"command-group",className:(0,m.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...a})}function N(e){let{className:t,...a}=e;return(0,r.jsx)(v.uB.Item,{"data-slot":"command-item",className:(0,m.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}var E=a(66634);let S=(0,a(74466).F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function k(e){let{className:t,variant:a,asChild:l=!1,...n}=e,o=l?E.DX:"span";return(0,r.jsx)(o,{"data-slot":"badge",className:(0,m.cn)(S({variant:a}),t),...n})}var B=a(54416),I=a(5196),D=a(62523),A=a(85057),C=a(30285),G=a(83637),M=a(53231),F=a(32944),_=a(4573),T=a(33472),P=a(6821),O=a(44288);let R=[{value:"BBAS3",label:"Banco do Brasil (BBAS3)"},{value:"PETR4",label:"Petrobr\xe1s (PETR4)"},{value:"BBSE3",label:"BB Seguridade (BBSE3)"},{value:"ITSA4",label:"Itausa (ITSA4)"},{value:"VALE3",label:"Vale (VALE3)"},{value:"TAEE11",label:"Taesa (TAEE11)"},{value:"CMIG4",label:"Cemig (CMIG4)"},{value:"ISAE4",label:"Isa Energia Brasil (ISAE4)"},{value:"CXSE3",label:"Caixa Seguridade (CXSE3)"},{value:"CSMG3",label:"Copasa (CSMG3)"},{value:"GOAU4",label:"Gerdau Metal\xfargica (GOAU4)"},{value:"WEGE3",label:"WEG (WEGE3)"},{value:"AURE3",label:"Auren Energia (AURE3)"},{value:"KLBN11",label:"Klabin (KLBN11)"},{value:"ITUB4",label:"Banco Itau Unibanco (ITUB4)"},{value:"EGIE3",label:"Engie Brasil (EGIE3)"}],z=["hsl(142.1 76.2% 36.3%)","hsl(346.8 77.2% 49.8%)","hsl(24.6 95% 53.1%)","hsl(262.1 83.3% 57.8%)","hsl(198.6 81.8% 50.6%)"],L="hsl(221.2 83.2% 53.3%)";function K(){var e;let[t,a]=(0,l.useState)([R[0].value]),[u,v]=(0,l.useState)("1000"),[x,E]=(0,l.useState)("1000"),[S,K]=(0,l.useState)("2017-01"),[U,V]=(0,l.useState)((0,G.GP)(new Date,"yyyy-MM")),[W,J]=(0,l.useState)({}),[$,X]=(0,l.useState)([]),[H,Q]=(0,l.useState)(!1),[Z,q]=(0,l.useState)(null),Y=(0,l.useMemo)(()=>{let e={contributions:{label:" Desembolso",color:L}};return t.forEach((t,a)=>{var r;e[t]={label:(null===(r=R.find(e=>e.value===t))||void 0===r?void 0:r.label)||t,color:z[a%z.length]}}),e},[t]);return(0,l.useEffect)(()=>{(async()=>{if(0===t.length){J({}),X([]),Q(!1);return}Q(!0),q(null);let e={};try{let[a,r]=S.split("-"),[l,n]=U.split("-"),o=(0,M.w)(new Date(parseInt(a),parseInt(r)-1,1,12,0,0)),s=(0,F.p)(new Date(parseInt(l),parseInt(n)-1,1,12,0,0)),i=await Promise.all(t.map(e=>fetch("https://api.brmarketdata.com/prices/history?ticker=".concat(e,"&start=").concat((0,G.GP)(o,"yyyy-MM-dd"),"&end=").concat((0,G.GP)(s,"yyyy-MM-dd")),{mode:"cors",headers:{Accept:"application/json"}}).then(t=>{if(!t.ok)throw Error("HTTP error for ".concat(e,"! status: ").concat(t.status));return t.json()}).then(t=>({stock:e,data:t})).catch(t=>({stock:e,error:t})))),d=null,c={};if(i.forEach(e=>{"error"in e&&e.error?(console.error("Error fetching data for ".concat(e.stock,":"),e.error),d||(d=e.error instanceof Error?e.error.message:"Failed to fetch data for ".concat(e.stock))):"data"in e&&(c[e.stock]=e.data)}),d){q(d),Q(!1);return}t.forEach(t=>{let o=c[t];if(!o)return;let s=(0,M.w)(new Date(parseInt(a),parseInt(r)-1,1,0,0,0)),i=(0,F.p)(new Date(parseInt(l),parseInt(n)-1,1,23,59,59)),d=o.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).filter(e=>{let t=new Date(e.date);return t>=s&&t<=i}).filter((e,t,a)=>{if(0===t)return!0;let r=new Date(e.date),l=new Date(a[t-1].date);return r.getMonth()!==l.getMonth()}),m=[],h=0,p=0,f=0;d.forEach((e,t)=>{let a=new Date(e.date),r=e.price,l=f;0===t?(l+=Number(u),p+=Number(u)):(l+=Number(x),p+=Number(x));let n=Math.floor(l/r),o=n*r;f=l-o,h+=n,m.push({date:a,portfolioValue:h*r,contributions:p,shares:h,price:r})}),e[t]=m}),J(e);let m=new Set;Object.values(e).flat().forEach(e=>m.add(e.date.getTime()));let h=Array.from(m).sort((e,t)=>e-t).map(e=>new Date(e)),p=[],f={},v=0;h.forEach(a=>{let r={date:a,contributions:0},l=!1;t.forEach(t=>{let n=e[t];if(n){let e=null;for(let t=n.length-1;t>=0;t--)if(n[t].date<=a){e=n[t];break}e?(r[t]=e.portfolioValue,f[t]=e.portfolioValue,l||(r.contributions=e.contributions,v=e.contributions,l=!0)):r[t]=f[t]||0}else r[t]=f[t]||0}),l||(r.contributions=v),p.push(r)}),X(p)}catch(e){console.error("Error fetching data:",e),q(e instanceof Error?e.message:"Failed to fetch data")}finally{Q(!1)}})()},[t,u,x,S,U]),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(T.Navbar,{}),(0,r.jsx)("main",{className:"flex-1",children:(0,r.jsx)("section",{className:"py-20 px-6",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-center mb-8",children:"Simulador de Aportes"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(A.J,{htmlFor:"initialContribution",children:"Aporte Inicial (R$)"}),(0,r.jsx)(D.p,{id:"initialContribution",type:"number",value:u,onChange:e=>v(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A.J,{htmlFor:"monthlyContribution",children:"Aporte Mensal (R$)"}),(0,r.jsx)(D.p,{id:"monthlyContribution",type:"number",value:x,onChange:e=>E(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A.J,{htmlFor:"stock",children:"A\xe7\xe3o (Selecione at\xe9 5)"}),(0,r.jsxs)(h,{children:[(0,r.jsx)(p,{asChild:!0,children:(0,r.jsx)(C.$,{variant:"outline",size:"lg",className:"w-full justify-start",children:(0,r.jsxs)("div",{className:"flex gap-1 flex-wrap",children:[0===t.length&&"Selecione as a\xe7\xf5es...",t.map(e=>{let t=R.find(t=>t.value===e);return(0,r.jsxs)(k,{variant:"secondary",className:"rounded hover:bg-secondary/80",onClick:t=>{t.preventDefault(),a(t=>t.filter(t=>t!==e))},children:[t?t.label:e,(0,r.jsx)(B.A,{className:"ml-1 h-3 w-3"})]},e)})]})})}),(0,r.jsx)(f,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:(0,r.jsxs)(g,{children:[(0,r.jsx)(b,{placeholder:"Buscar a\xe7\xe3o..."}),(0,r.jsxs)(j,{children:[(0,r.jsx)(y,{children:"Nenhuma a\xe7\xe3o encontrada."}),(0,r.jsx)(w,{children:R.map(e=>{let l=t.includes(e.value),n=!l&&t.length>=5;return(0,r.jsxs)(N,{value:e.value,disabled:n,onSelect:()=>{l?a(t=>t.filter(t=>t!==e.value)):n||a(t=>[...t,e.value])},className:(0,m.cn)("flex items-center justify-between",n?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[(0,r.jsx)("span",{children:e.label}),l&&(0,r.jsx)(I.A,{className:"ml-2 h-4 w-4 text-primary"})]},e.value)})})]})]})})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(A.J,{htmlFor:"startDate",children:"Data Inicial"}),(0,r.jsx)(O.l,{value:S,onChange:K})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(A.J,{htmlFor:"endDate",children:"Data Final"}),(0,r.jsx)(O.l,{value:U,onChange:V})]})]})]}),Z&&(0,r.jsx)("div",{className:"mb-8 p-4 bg-destructive/10 text-destructive rounded-lg text-center",children:Z}),(0,r.jsx)("div",{className:"h-[400px] w-full",children:H?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):$.length>0?(0,r.jsx)(c.at,{config:Y,className:"h-full w-full px-2 mx-auto",children:(0,r.jsxs)(n.Q,{data:$,margin:{left:30,right:10,top:10,bottom:5},children:[(0,r.jsx)(o.d,{strokeDasharray:"5 3",horizontal:!0,vertical:!0,stroke:"rgba(120, 120, 120, 0.4)"}),(0,r.jsx)(s.W,{dataKey:"date",tickFormatter:e=>(0,G.GP)(e,"MMM/yy",{locale:_.F})}),(0,r.jsx)(i.h,{tickFormatter:e=>"R$".concat(e.toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0}))}),(0,r.jsx)(c.II,{content:(0,r.jsx)(c.Nt,{labelFormatter:(e,t)=>{var a,r;if(!t||0===t.length||!(null===(r=t[0])||void 0===r?void 0:null===(a=r.payload)||void 0===a?void 0:a.date))return"";try{let e=t[0].payload.date;return e instanceof Date&&!isNaN(e.valueOf())?(0,G.GP)(e,"PP",{locale:_.F}):""}catch(e){return console.error("Error formatting date in tooltip:",e),""}},formatter:(e,t,a)=>{var r,l;let n=null!==(l=null===(r=Y[t])||void 0===r?void 0:r.label)&&void 0!==l?l:t;return["R$".concat(Number(e).toLocaleString("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0})," "),n]},itemSorter:e=>{if("contributions"===e.dataKey)return -1;let a=t.indexOf(e.dataKey);return -1===a?1/0:a}})}),(0,r.jsx)(d.G,{type:"monotone",dataKey:"contributions",stroke:L,fill:L,fillOpacity:.1,strokeWidth:2,name:String(null!==(e=Y.contributions.label)&&void 0!==e?e:"Desembolso")}),t.map((e,t)=>{var a,l;return(0,r.jsx)(d.G,{type:"monotone",dataKey:e,stroke:z[t%z.length],fill:z[t%z.length],fillOpacity:.1,strokeWidth:2,name:String(null!==(l=null===(a=Y[e])||void 0===a?void 0:a.label)&&void 0!==l?l:e)},e)})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:t.length>0?"Nenhum dado dispon\xedvel para o per\xedodo selecionado.":"Selecione uma ou mais a\xe7\xf5es para simular."})})]})})}),(0,r.jsx)(P.w,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[390,148,638,196,760,441,684,358],()=>t(47527)),_N_E=e.O()}]);